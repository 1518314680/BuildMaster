# 环境配置说明

## 后端API地址配置

### 方式一：使用环境变量（推荐）

在项目根目录创建 `.env.local` 文件：

```env
# API配置
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080
```

### 方式二：默认配置

如果不创建环境变量文件，系统会使用默认配置：
- **默认地址**: `http://localhost:8080`
- **后端实际端口**: 8080（Spring Boot默认）

## 后端服务检查

### 1. 确认后端服务已启动

```bash
# 在 BuildMaster-API 目录下运行
mvn spring-boot:run
```

或使用IDE启动 `BuildMasterApiApplication.java`

### 2. 验证后端服务

浏览器访问：
- Swagger文档: http://localhost:8080/swagger-ui
- API测试: http://localhost:8080/api/components

### 3. 前端连接测试

启动前端服务：
```bash
cd BuildMaster-UI
npm run dev
```

访问: http://localhost:3000/build

## 常见问题

### 问题1：显示"暂无可用配件"

**原因**：
- 后端服务未启动
- 端口配置错误
- 数据库中没有数据

**解决方案**：
1. 确认后端在8080端口运行
2. 检查浏览器控制台网络请求
3. 确认数据库中有配件数据

### 问题2：跨域问题

后端已配置CORS，允许所有来源：
```java
@CrossOrigin(origins = "*")
```

### 问题3：认证失败

确保已登录并且Token有效：
- 登录页面: http://localhost:3000/login
- Token存储在localStorage中

## 端口汇总

| 服务 | 默认端口 | 访问地址 |
|------|---------|---------|
| 前端 | 3000 | http://localhost:3000 |
| 后端API | 8080 | http://localhost:8080 |
| MySQL | 3306 | localhost:3306 |
| Redis | 6379 | localhost:6379 |

## 开发环境启动顺序

1. **启动MySQL**（确保运行在3306端口）
2. **启动Redis**（可选，用于缓存）
3. **启动后端**（Spring Boot）
4. **启动前端**（Next.js）

## 生产环境配置

在生产环境中，创建 `.env.production` 文件：

```env
NEXT_PUBLIC_API_BASE_URL=https://api.yourdomain.com
```

然后构建：
```bash
npm run build
npm start
```

