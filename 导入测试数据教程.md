# 📦 导入测试数据 - 5分钟快速教程

## 🎯 目标

为BuildMaster数据库导入26个真实的配件数据，包含京东SKU ID，可用于价格查询测试。

---

## 🚀 快速开始（Windows）

### 方式1: 使用命令行（推荐）

```powershell
# 1. 打开 PowerShell
# 2. 进入项目目录
cd E:\process\project\BuildMaster

# 3. 导入数据
mysql -u root -p buildmaster < BuildMaster-API/sql/test_data_with_jd_sku.sql

# 提示输入密码时输入: asd962464..
```

### 方式2: 使用MySQL Workbench

1. 打开 MySQL Workbench
2. 连接到本地数据库
3. 点击 `File` → `Open SQL Script`
4. 选择文件：`BuildMaster-API/sql/test_data_with_jd_sku.sql`
5. 点击 ⚡ 执行按钮

### 方式3: 使用Navicat/DBeaver

1. 打开数据库管理工具
2. 连接到 `buildmaster` 数据库
3. 点击 `执行SQL文件`
4. 选择 `test_data_with_jd_sku.sql`
5. 执行

---

## ✅ 验证导入结果

### 方法1: 使用命令行

```bash
# 查看配件总数
mysql -u root -p buildmaster -e "SELECT COUNT(*) as total FROM components;"

# 查看每种类型的配件数量
mysql -u root -p buildmaster -e "SELECT type, COUNT(*) as count FROM components GROUP BY type;"

# 查看有SKU ID的配件
mysql -u root -p buildmaster -e "SELECT name, jd_sku_id, price FROM components LIMIT 5;"
```

### 方法2: 使用API

```bash
# 启动后端（如果还没启动）
cd BuildMaster-API
mvn spring-boot:run

# 在另一个终端查询
curl http://localhost:8080/api/components
```

### 方法3: 使用Swagger

```
访问: http://localhost:8080/swagger-ui/index.html
找到: GET /api/components
点击: Try it out → Execute
```

---

## 📊 导入的数据

### 配件类型和数量

| 类型 | 数量 | 说明 |
|------|-----|------|
| CPU | 4个 | Intel i9/i7, AMD 7950X/7800X3D |
| GPU | 4个 | RTX 4090/4080/4070 Ti, RX 7900 XTX |
| 主板 | 3个 | 华硕/微星/技嘉 Z790/B760/X670E |
| 内存 | 3个 | DDR5/DDR4 各种容量 |
| 硬盘 | 3个 | 三星/西数/致钛 NVMe SSD |
| 电源 | 3个 | 海韵/安钛克/长城 850W-1000W |
| 机箱 | 3个 | 联力/追风者/酷冷至尊 |
| 散热器 | 3个 | 利民/九州风神/恩杰 |

**总计: 26个配件**

### 数据特点

✅ **所有配件都包含：**
- 真实的京东SKU ID
- 详细的规格参数
- 当前价格和原价
- 品牌和型号信息
- 库存数量

---

## 🔬 测试价格更新

### 1. 查看当前价格

```bash
curl http://localhost:8080/api/components/1
```

### 2. 手动触发价格更新

```bash
curl -X POST http://localhost:8080/api/components/update-prices
```

### 3. 查看更新结果

```json
{
  "success": true,
  "successCount": 26,
  "failureCount": 0,
  "skipCount": 0,
  "totalCount": 26,
  "message": "价格更新完成"
}
```

### 4. 验证价格已更新

```bash
curl http://localhost:8080/api/components/1 | jq '{name, price, priceUpdatedAt}'
```

---

## 🎨 前端展示示例

导入数据后，前端可以这样展示：

```typescript
// 获取配件列表
const components = await fetch('http://localhost:8080/api/components').then(r => r.json());

// 显示配件卡片
components.map(component => (
  <Card key={component.id}>
    <h3>{component.name}</h3>
    <p>{component.brand} - {component.model}</p>
    <div className="price">
      <span className="current">¥{component.price}</span>
      {component.originalPrice && (
        <span className="original">¥{component.originalPrice}</span>
      )}
    </div>
    <small>更新于: {new Date(component.priceUpdatedAt).toLocaleString()}</small>
    <a href={`https://item.jd.com/${component.jdSkuId}.html`} target="_blank">
      查看商品
    </a>
  </Card>
))
```

---

## ❓ 常见问题

### Q1: 导入时提示"表不存在"？

**解决方案：**
```bash
# 先运行初始化脚本
mysql -u root -p buildmaster < BuildMaster-API/sql/init.sql

# 再导入测试数据
mysql -u root -p buildmaster < BuildMaster-API/sql/test_data_with_jd_sku.sql
```

### Q2: 数据重复导入怎么办？

**解决方案：**
```sql
-- 清空配件表
TRUNCATE TABLE build_config_components;
TRUNCATE TABLE components;

-- 重新导入
mysql -u root -p buildmaster < BuildMaster-API/sql/test_data_with_jd_sku.sql
```

### Q3: 价格更新失败？

**检查步骤：**
1. 确认后端已启动
2. 检查网络连接
3. 查看日志：`logs/spring.log`
4. 验证SKU ID是否有效

### Q4: 如何添加更多配件？

**方法1: 通过API**
```bash
curl -X POST http://localhost:8080/api/components \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Intel i5-13600K",
    "type": "CPU",
    "brand": "Intel",
    "model": "i5-13600K",
    "price": 1899.00,
    "jdSkuId": "100035246122"
  }'
```

**方法2: 通过CSV导入**
```csv
名称,类型,品牌,型号,价格,京东SKU ID
Intel i5-13600K,CPU,Intel,i5-13600K,1899.00,100035246122
```

```bash
curl -X POST http://localhost:8080/api/components/import/csv \
  -F "file=@components.csv"
```

---

## 🎯 下一步

导入数据后，你可以：

1. **测试API接口**
   ```bash
   # 查询所有配件
   curl http://localhost:8080/api/components
   
   # 按类型查询
   curl http://localhost:8080/api/components/type/CPU
   
   # 搜索配件
   curl "http://localhost:8080/api/components/search?keyword=Intel"
   ```

2. **测试价格更新**
   ```bash
   # 更新所有价格
   curl -X POST http://localhost:8080/api/components/update-prices
   
   # 更新单个配件
   curl -X POST http://localhost:8080/api/components/1/update-price
   ```

3. **开发前端界面**
   - 配件列表展示
   - 配件详情页面
   - 装机配置功能

4. **准备上线**
   - 完善配件数据
   - 优化UI/UX
   - 准备域名和备案

---

## 📚 相关文档

- 📖 [京东API申请替代方案](./京东API申请替代方案.md)
- 📖 [京东API对接完整指南](./京东API对接完整指南.md)
- 📖 [配件数据获取方案总结](./配件数据获取方案总结.md)

---

## 🎉 恭喜！

数据导入成功后，你就可以：
- ✅ 使用真实的配件数据
- ✅ 测试价格查询功能
- ✅ 开发前端展示页面
- ✅ 准备上线和申请API

**现在就开始吧！** 🚀

```bash
mysql -u root -p buildmaster < BuildMaster-API/sql/test_data_with_jd_sku.sql
```

